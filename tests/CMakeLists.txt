cmake_minimum_required(VERSION 3.17)
set(CMAKE_RUNTIME_OUTPUT_DIRECTORY ${CMAKE_BINARY_DIR}/tests)

set(TEST_LIBRARIES acul)
set(TEST_OUTPUT_DIR "${CMAKE_BINARY_DIR}/tests/artifacts")
file(MAKE_DIRECTORY "${TEST_OUTPUT_DIR}")
set(TEST_ENV "TEST_OUTPUT_DIR=${TEST_OUTPUT_DIR}")
set(TEST_SOURCES "")

add_test_files(acul flags flags.cpp)
add_test_files(acul isa isa.cpp)
add_test_files(acul event event.cpp)
add_test_files(acul exception exception.cpp)
add_test_files(acul memory memory.cpp)
add_test_files(acul type_traits type_traits.cpp)
add_test_files(acul "string" "string.cpp")
add_test_files(acul hashmap hashmap.cpp)
add_test_files(acul hl_hashmap hl_hashmap.cpp)
add_test_files(acul hashset hashset.cpp)
add_test_files(acul hl_hashset hl_hashset.cpp)
add_test_files(acul hash_utils hash_utils.cpp)
add_test_files(acul file io/fs/file.cpp)
add_test_files(acul "path" "io/path.cpp")
add_test_files(acul log log.cpp)
add_test_files(acul task task.cpp)
add_test_files(acul shared_mutex shared_mutex.cpp)
add_test_files(acul vector vector.cpp)
add_test_files(acul list list.cpp)
add_test_files(acul forward_list forward_list.cpp)
add_test_files(acul comparator comparator.cpp)
add_test_files(acul stream stream.cpp)
add_test_files(acul disposal_queue disposal_queue.cpp)
add_test_files(acul functional functional.cpp)
if(ACUL_INTL_ENABLE)
    add_test_files(acul locales locales.cpp)
endif()
if(ACUL_ZSTD_ENABLE)
    add_test_files(acul jatc io/fs/jatc.cpp)
endif()

if(ENABLE_COVERAGE)
    add_test_coverage(acul)
endif()
